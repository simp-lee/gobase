{{ template "base" . }}

{{ define "title" }}{{ if .IsEdit }}编辑用户{{ else }}新建用户{{ end }}{{ end }}

{{ define "content" }}
<div class="max-w-lg mx-auto">
    <h1 class="text-2xl font-bold text-gray-900 mb-6">{{ if .IsEdit }}编辑用户{{ else }}新建用户{{ end }}</h1>

    {{ if .Error }}
    <div class="mb-4 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700">
        {{ .Error }}
    </div>
    {{ end }}

    <form {{ if .IsEdit }}hx-put="/users/{{ .User.ID }}"{{ else }}hx-post="/users"{{ end }}
          hx-target="body"
          hx-swap="outerHTML"
          class="bg-white rounded-lg shadow p-6 space-y-5">

        <input type="hidden" name="_csrf_token" value="{{ .CSRFToken }}">

        <div>
            <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Name</label>
            <input type="text" id="name" name="name"
                   value="{{ if .IsEdit }}{{ .User.Name }}{{ end }}"
                   required
                   class="block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm placeholder:text-gray-400 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-colors duration-200"
                   placeholder="请输入用户名">
        </div>

        <div>
            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
            <input type="email" id="email" name="email"
                   value="{{ if .IsEdit }}{{ .User.Email }}{{ end }}"
                   required
                   class="block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm placeholder:text-gray-400 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-colors duration-200"
                   placeholder="请输入邮箱地址">
        </div>

        <div class="flex items-center justify-end space-x-3 pt-2">
            <a href="/users"
               class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200">
                取消
            </a>
            <button type="submit"
                    hx-disabled-elt="this"
                    hx-indicator="#submit-spinner"
                    class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed">
                <svg id="submit-spinner" class="htmx-indicator -ml-1 mr-2 h-4 w-4 animate-spin text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
                </svg>
                保存
            </button>
        </div>
    </form>
</div>
{{ end }}
