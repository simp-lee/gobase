{{ define "base" }}
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ block "title" . }}GoBase{{ end }}</title>
    <script src="/static/vendor/tailwind.js"></script>
    <link rel="stylesheet" href="/static/css/app.css">
</head>
<body class="min-h-screen bg-gray-50 text-gray-900">

    {{ block "nav" . }}{{ end }}

    <main class="container mx-auto px-4 py-8">
        {{ block "content" . }}{{ end }}
    </main>

    <!-- M6: Toast notification container (Alpine.js) -->
    <div id="toast-container"
         x-data="toastManager()"
         @show-toast.window="addToast($event.detail)"
         class="fixed top-4 right-4 z-50 space-y-2">
        <template x-for="toast in toasts" :key="toast.id">
            <div x-show="toast.visible"
                 x-transition:enter="transition ease-out duration-300"
                 x-transition:enter-start="opacity-0 translate-x-4"
                 x-transition:enter-end="opacity-100 translate-x-0"
                 x-transition:leave="transition ease-in duration-200"
                 x-transition:leave-start="opacity-100"
                 x-transition:leave-end="opacity-0"
                 :class="toast.type === 'success' ? 'bg-green-500' : toast.type === 'error' ? 'bg-red-500' : 'bg-blue-500'"
                 class="text-white px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2 min-w-[280px]">
                <span x-text="toast.message" class="flex-1"></span>
                <button @click="removeToast(toast.id)" class="text-white/80 hover:text-white">&times;</button>
            </div>
        </template>
    </div>

    {{/* M7: CSRF token available for forms via .CSRFToken */}}

    <script src="/static/vendor/htmx.min.js"></script>
    <script src="/static/vendor/alpine.min.js" defer></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
{{ end }}
